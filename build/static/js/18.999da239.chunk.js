(this["webpackJsonpright-deliveres"]=this["webpackJsonpright-deliveres"]||[]).push([[18],{155:function(e,t,a){"use strict";var n=a(0),r=a.n(n),o=a(34),s=a(5),l=a(26);t.a=Object(l.b)((function(e){return{config:e.config,cartCount:e.cart.cartItems.length}}))(Object(s.g)((function(e){var t=e.cartCount;return r.a.createElement("div",{className:"fixed-top align-middle",style:{position:"fixed",padding:"0.5rem 1rem",top:"0",width:"100%",backgroundColor:"#2F4F4F",zIndex:"10"}},r.a.createElement("div",{style:{paddingTop:"4vh",display:"flex",alignItems:"center"}},r.a.createElement("div",{onClick:e.back,style:{fontSize:"20px",color:"white",padding:"0px 20px"}},r.a.createElement("i",{className:"fa fa-angle-left","aria-hidden":"true"})),r.a.createElement("span",{style:{fontSize:"18px",color:"white"}},e.heading),r.a.createElement(o.b,{to:"/dashboard/cart",className:"option_links ml-auto mr-3"},r.a.createElement("i",{className:"uil uil-shopping-cart-alt icon_wishlist"}),r.a.createElement("span",{className:"noti_count1"},t))))})))},249:function(e,t,a){"use strict";var n=a(1),r=a(287),o=a(288),s=a(347),l=a(346),i=a(0),c=a.n(i),d=a(289),m=(a(273),a(344)),p=a.n(m),u=a(345),g=a.n(u),h=a(16);p.a.setApiKey(h.a),p.a.enableDebug();var f=function(e){Object(s.a)(a,e);var t=Object(l.a)(a);function a(e){var o;return Object(r.a)(this,a),(o=t.call(this,e)).handleLocationError=function(e){console.warn("ERROR(".concat(e.code,"): ").concat(e.message)),o.props.setError("Please Allow location access. ( Unblock if not prompted to allow)"),o.props.setShowToast(!0)},o.getLiveLocation=function(){navigator.geolocation?navigator.geolocation.getCurrentPosition(o.setLiveLocation,o.handleLocationError,{enableHighAccuracy:!0,timeout:5e3,maximumAge:1e4}):(o.props.setError("Location Service is not supported by your device."),o.props.setShowToast(!0))},o.setLiveLocation=function(e){var t=e.coords;console.log(t),p.a.fromLatLng(t.latitude,t.longitude).then((function(e){var a=e.results[0].formatted_address,r=e.results[0].address_components,s=o.getCity(r),l=o.getArea(r),i=o.getState(r);o.setState(Object(n.a)(Object(n.a)({},o.state),{},{showMapFooter:!0,address:a||"",area:l||"",city:s||"",state:i||"",mapPosition:{lat:t.latitude,lng:t.longitude},markerPosition:{lat:t.latitude,lng:t.longitude}})),o.props.handleAddressFromMap(o.state)}))},o.handleCloseFooter=function(){o.setState(Object(n.a)(Object(n.a)({},o.state),{},{showMapFooter:!1}))},o.getCity=function(e){for(var t=0;t<e.length;t++)if(e[t].types[0]&&"administrative_area_level_2"===e[t].types[0])return e[t].long_name},o.getArea=function(e){for(var t=0;t<e.length;t++)if(e[t].types[0])for(var a=0;a<e[t].types.length;a++)if("sublocality_level_1"===e[t].types[a]||"locality"===e[t].types[a])return e[t].long_name},o.getState=function(e){for(var t=0;t<e.length;t++)for(var a=0;a<e.length;a++)if(e[a].types[0]&&"administrative_area_level_1"===e[a].types[0])return e[a].long_name},o.onMarkerDragEnd=function(e){var t=e.latLng.lat(),a=e.latLng.lng();p.a.fromLatLng(t,a).then((function(e){var r=e.results[0].formatted_address,s=e.results[0].address_components,l=o.getCity(s),i=o.getArea(s),c=o.getState(s);o.setState(Object(n.a)(Object(n.a)({},o.state),{},{showMapFooter:!0,address:r||"",area:i||"",city:l||"",state:c||"",markerPosition:{lat:t,lng:a},mapPosition:{lat:t,lng:a}})),o.props.handleAddressFromMap(o.state)}),(function(e){console.error(e)}))},o.onPlaceSelected=function(e){var t=e.formatted_address,a=e.address_components,r=o.getCity(a),s=o.getArea(a),l=o.getState(a),i=e.geometry.location.lat(),c=e.geometry.location.lng();o.setState(Object(n.a)(Object(n.a)({},o.state),{},{showMapFooter:!0,address:t||"",area:s||"",city:r||"",state:l||"",markerPosition:{lat:i,lng:c},mapPosition:{lat:i,lng:c}})),o.props.handleAddressFromMap(o.state)},o.state={address:"",showMapFooter:!0,city:"",area:"",state:"",mapPosition:{lat:o.props.center.lat,lng:o.props.center.lng},markerPosition:{lat:o.props.center.lat,lng:o.props.center.lng}},o}return Object(o.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.getLiveLocation(),p.a.fromLatLng(this.state.mapPosition.lat,this.state.mapPosition.lng).then((function(t){var a=t.results[0].formatted_address,r=t.results[0].address_components,o=e.getCity(r),s=e.getArea(r),l=e.getState(r);e.setState(Object(n.a)(Object(n.a)({},e.state),{},{showMapFooter:!0,address:a||"",area:s||"",city:o||"",state:l||""})),e.props.handleAddressFromMap(e.state)}),(function(e){console.error(e)}))}},{key:"shouldComponentUpdate",value:function(e,t){return this.state.markerPosition.lat!==this.props.center.lat||this.state.address!==t.address||this.state.city!==t.city||this.state.area!==t.area||this.state.state!==t.state||this.props.center.lat!==e.center.lat&&void 0}},{key:"render",value:function(){var e=this,t=Object(d.withScriptjs)(Object(d.withGoogleMap)((function(t){return c.a.createElement(d.GoogleMap,{google:e.props.google,defaultZoom:e.props.zoom,defaultCenter:{lat:e.state.mapPosition.lat,lng:e.state.mapPosition.lng}},c.a.createElement(d.Marker,{google:e.props.google,name:"Pin",draggable:!0,onDragEnd:e.onMarkerDragEnd,position:{lat:e.state.markerPosition.lat,lng:e.state.markerPosition.lng}}),c.a.createElement(d.Marker,null),c.a.createElement("div",{className:"map-overlay d-flex"},c.a.createElement("i",{style:{fontSize:"18px",marginTop:"3vh"},className:"fa fa-search","aria-hidden":"true"}),c.a.createElement(g.a,{style:{width:"55%",height:"6vh",right:"2%",paddingLeft:"16px",background:"none",border:"0",outline:"0",color:"white",borderRadius:"5px",position:"relative",marginTop:"8px",fontSize:"16px"},onPlaceSelected:e.onPlaceSelected,types:["(regions)"],placeholder:"Search your location",componentRestrictions:{country:"in"}}),c.a.createElement("span",{onClick:e.getLiveLocation,style:{color:"white",marginTop:"2.7vh",paddingRight:"10px"}},"Live Location"),c.a.createElement("i",{className:"fa fa-map-marked-alt icon__1",style:{color:"white"},onClick:e.getLiveLocation,"aria-hidden":"true"})),c.a.createElement("div",{className:"map-overlay-footer",style:{display:e.state.showMapFooter?"block":"none"}},c.a.createElement("div",{className:"show-address"},e.state.address),c.a.createElement("span",{className:"close-address-display",onClick:e.handleCloseFooter},c.a.createElement("i",{className:"fa fa-times","aria-hidden":"true"})),c.a.createElement("span",{className:"next-address-button",onClick:e.props.handleCloseMap},"Continue",c.a.createElement("i",{className:"fa fa-angle-right ml-2","aria-hidden":"true"}))))})));return void 0!==this.props.center.lat?c.a.createElement("div",null,c.a.createElement(t,{googleMapURL:"https://maps.googleapis.com/maps/api/js?key=".concat(h.a,"&libraries=places"),loadingElement:c.a.createElement("div",{style:{height:"100%"}}),containerElement:c.a.createElement("div",{style:{height:"100vh",margin:"0",padding:"0"}}),mapElement:c.a.createElement("div",{style:{height:"100%"}})})):c.a.createElement("div",{style:{height:this.props.height}})}}]),a}(i.Component);t.a=f},273:function(e,t,a){},596:function(e,t,a){"use strict";a.r(t);var n=a(51),r=a(1),o=a(21),s=a.n(o),l=a(35),i=a(12),c=a(0),d=a.n(c),m=a(177),p=a(5),u=a(26),g=a(249),h=a(155),f=a(154),v=a(278),b=a(15),y=a(16),E=a(19);t.default=Object(u.b)((function(e){return{address:e.address,config:e.config,cart:e.cart,restaurant:e.restaurant}}),(function(e){return{addNewAddress:function(t){return e(b.a(t))},setAddressList:function(t){return e(b.q(t))}}}))(Object(m.geolocated)({positionOptions:{enableHighAccuracy:!0},userDecisionTimeout:5e3})((function(e){var t=Object(c.useState)(!0),a=Object(i.a)(t,2),o=a[0],m=a[1],u=e.restaurant.curRestaurant,b=e.config.curBranch.points,O=Object(p.f)(),j=Object(c.useState)(!1),N=Object(i.a)(j,2),k=N[0],w=N[1],S=Object(c.useState)(""),x=Object(i.a)(S,2),C=x[0],L=x[1],P=Object(c.useState)(!0),A=Object(i.a)(P,2),_=A[0],F=A[1],M=Object(c.useState)({lat:u.lat,lng:u.lon}),D=Object(i.a)(M,2),T=D[0],z=D[1],R={id:"",name:e.config.authData.user.name,type:1,new:!0,phone:e.config.authData.phone,flat:"",street:"",area:"",city:"",lat:u.lat,lng:u.long},B=Object(c.useState)(R),I=Object(i.a)(B,2),K=I[0],H=I[1];Object(c.useEffect)((function(){z({lat:u.lat,lng:u.lon})}),[]);var J=function(){var t=Object(l.a)(s.a.mark((function t(){var a,n,r,o;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=y.b+"add/address",n={flat:K.flat,area:K.area,city:K.city,lat:K.lat,lon:K.lon,type:K.type},r={method:"POST",headers:{"Content-Type":"application/json;charset=utf-8",rKey:e.config.authData.rKey,dKey:e.config.authData.dKey},body:JSON.stringify(n)},t.next=5,Object(E.a)(a,r);case 5:return t.next=7,t.sent.json();case 7:if(!(o=t.sent)||1!==o.status){t.next=14;break}return L(o.msg),w(!0),e.setAddressList(o.address),O.goBack(),t.abrupt("return");case 14:if(!o){t.next=18;break}return L(o.msg),w(!0),t.abrupt("return");case 18:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),U=d.a.createElement(f.a,{onClose:function(){return w(!1)},show:k,delay:2e3,autohide:!0,style:{position:"fixed",bottom:"20vh",zIndex:"999",textAlign:"center",left:"50%",transform:"translateX(-50%)"}},d.a.createElement(f.a.Body,{style:{backgroundColor:"#2f4f4f",color:"white",borderBottom:"none",textAlign:"center",padding:"0.2rem 0.8rem"}},d.a.createElement("strong",{className:"mr-auto"},C))),W=d.a.createElement(d.a.Fragment,null,d.a.createElement(h.a,{heading:"Add Address",back:function(){return O.goBack()}}),U,d.a.createElement("div",{className:"all-product-grid container",style:{padding:"2px 15px"}},d.a.createElement("div",{className:"row",style:{marginTop:"8vh"}},d.a.createElement("div",{className:"col-lg-12 container checout-address-step"},d.a.createElement("form",{className:"",onSubmit:function(e){_?(e.preventDefault(),J()):(e.preventDefault(),L("We can't deliver to your location."),w(!0))}},d.a.createElement("div",{className:"address-fieldset"},d.a.createElement("div",{className:"row"},d.a.createElement("div",{className:"col-lg-6 col-md-12"},d.a.createElement("div",{className:"form-group"},d.a.createElement("div",{className:"product-radio"},d.a.createElement("ul",{className:"product-now"},d.a.createElement("li",null,d.a.createElement("input",{type:"radio",name:"address1",id:"ad1",checked:1===K.type,onChange:function(){return H(Object(r.a)(Object(r.a)({},K),{},{type:1}))}}),d.a.createElement("label",{htmlFor:"ad1"},"Home")),d.a.createElement("li",null,d.a.createElement("input",{type:"radio",name:"address2",id:"ad2",checked:2===K.type,onChange:function(){return H(Object(r.a)(Object(r.a)({},K),{},{type:2}))}}),d.a.createElement("label",{htmlFor:"ad2"},"Office")),d.a.createElement("li",null,d.a.createElement("input",{type:"radio",name:"address3",id:"ad3",checked:3===K.type,onChange:function(){return H(Object(r.a)(Object(r.a)({},K),{},{type:3}))}}),d.a.createElement("label",{htmlFor:"ad3"},"Other")))))),K.area&&d.a.createElement("div",{className:"address-item"},d.a.createElement("div",{className:"address-dt-all"},d.a.createElement("p",{style:{display:"flex",fontSize:"14px",fontWeight:"bold",justifyContent:"space-between"}},"Selected Address",d.a.createElement("div",{className:"d-flex",onClick:function(){return m(!0)}},"Edit",d.a.createElement("i",{className:"uil uil-edit"}))),d.a.createElement("p",null,K.area))),d.a.createElement("div",{className:"col-lg-6 col-md-12",style:{marginBottom:"20px"}},d.a.createElement("div",{className:"form-group"},d.a.createElement("label",{className:"control-label"},"Flat / House / Office No.*"),d.a.createElement("input",{id:"flat",name:"flat",type:"text",placeholder:"Flat No.",value:K.flat,onChange:function(e){var t=e.target,a=t.name,o=t.value;H(Object(r.a)(Object(r.a)({},K),{},Object(n.a)({},a,o)))},className:"form-control input-md",required:!0}))),d.a.createElement("div",{className:"col-lg-12 col-md-12"},d.a.createElement("div",{className:"form-group"},d.a.createElement("div",{className:"address-btns"},d.a.createElement("div",{className:""},d.a.createElement("button",{type:"submit",className:"save-btn14 hover-btn"},"Add Address")),d.a.createElement("div",{className:"col"},d.a.createElement("button",{onClick:function(){O.push("/checkout")},className:"next-btn16 hover-btn float-right"},"Back")))))))))))),q=d.a.createElement("div",{style:{width:"100%",overflow:"hidden",position:"absolute"}},U,d.a.createElement(g.a,{google:e.google,center:T,height:"100%",zoom:15,handleAddressFromMap:function(e){H(Object(r.a)(Object(r.a)({},K),{},{area:e.address,city:e.area,lat:e.mapPosition.lat,lon:e.mapPosition.lng})),function(e,t){var a=[];b.map((function(e){return a.push({latitude:e[1],longitude:e[0]})}));var n=v.isPointInPolygon({latitude:e,longitude:t},a);F(n)}(e.mapPosition.lat,e.mapPosition.lng)},handleCloseMap:function(){_?m(!1):(L("We can't deliver to your location."),w(!0))},isServicable:_,setError:L,setShowToast:w}));return o?q:W})))}}]);
//# sourceMappingURL=18.999da239.chunk.js.map