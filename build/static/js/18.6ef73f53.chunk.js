(this["webpackJsonpright-deliveres"]=this["webpackJsonpright-deliveres"]||[]).push([[18],{135:function(e,t,a){"use strict";var n=a(0),r=a.n(n),o=a(28),s=a(4),l=a(21);t.a=Object(l.b)((function(e){return{config:e.config,cartCount:e.cart.cartItems.length}}))(Object(s.g)((function(e){var t=e.cartCount;return r.a.createElement("div",{className:"fixed-top align-middle",style:{position:"fixed",padding:"0.5rem 1rem",top:"0",width:"100%",backgroundColor:"#2F4F4F",zIndex:"10"}},r.a.createElement("div",{style:{paddingTop:"4vh",display:"flex",alignItems:"center"}},r.a.createElement("div",{onClick:e.back,style:{fontSize:"20px",color:"white",padding:"0px 20px"}},r.a.createElement("i",{className:"fa fa-angle-left","aria-hidden":"true"})),r.a.createElement("span",{style:{fontSize:"18px",color:"white"}},e.heading),r.a.createElement(o.b,{to:"/dashboard/cart",className:"option_links ml-auto mr-3"},r.a.createElement("i",{className:"uil uil-shopping-cart-alt icon_wishlist"}),r.a.createElement("span",{className:"noti_count1"},t))))})))},563:function(e,t,a){},583:function(e,t,a){"use strict";a.r(t);var n=a(43),r=a(1),o=a(29),s=a.n(o),l=a(42),i=a(41),c=a(0),d=a.n(c),m=a(200),p=a(4),u=a(21),g=a(364),h=a(365),f=a(569),v=a(568),b=a(366),y=(a(563),a(564)),E=a.n(y),O=a(565),j=a.n(O),N=a(14);E.a.setApiKey(N.a),E.a.enableDebug();var k=function(e){Object(f.a)(a,e);var t=Object(v.a)(a);function a(e){var n;return Object(g.a)(this,a),(n=t.call(this,e)).handleLocationError=function(e){console.warn("ERROR(".concat(e.code,"): ").concat(e.message)),n.props.setError("Please Allow location access. ( Unblock if not prompted to allow)"),n.props.setShowToast(!0)},n.getLiveLocation=function(){navigator.geolocation?navigator.geolocation.getCurrentPosition(n.setLiveLocation,n.handleLocationError,{enableHighAccuracy:!0,timeout:5e3,maximumAge:1e4}):(n.props.setError("Location Service is not supported by your device."),n.props.setShowToast(!0))},n.setLiveLocation=function(e){var t=e.coords;console.log(t),E.a.fromLatLng(t.latitude,t.longitude).then((function(e){var a=e.results[0].formatted_address,o=e.results[0].address_components,s=n.getCity(o),l=n.getArea(o),i=n.getState(o);n.setState(Object(r.a)(Object(r.a)({},n.state),{},{showMapFooter:!0,address:a||"",area:l||"",city:s||"",state:i||"",mapPosition:{lat:t.latitude,lng:t.longitude},markerPosition:{lat:t.latitude,lng:t.longitude}})),n.props.handleAddressFromMap(n.state)}))},n.handleCloseFooter=function(){n.setState(Object(r.a)(Object(r.a)({},n.state),{},{showMapFooter:!1}))},n.getCity=function(e){for(var t=0;t<e.length;t++)if(e[t].types[0]&&"administrative_area_level_2"===e[t].types[0])return e[t].long_name},n.getArea=function(e){for(var t=0;t<e.length;t++)if(e[t].types[0])for(var a=0;a<e[t].types.length;a++)if("sublocality_level_1"===e[t].types[a]||"locality"===e[t].types[a])return e[t].long_name},n.getState=function(e){for(var t=0;t<e.length;t++)for(var a=0;a<e.length;a++)if(e[a].types[0]&&"administrative_area_level_1"===e[a].types[0])return e[a].long_name},n.onMarkerDragEnd=function(e){var t=e.latLng.lat(),a=e.latLng.lng();E.a.fromLatLng(t,a).then((function(e){var o=e.results[0].formatted_address,s=e.results[0].address_components,l=n.getCity(s),i=n.getArea(s),c=n.getState(s);n.setState(Object(r.a)(Object(r.a)({},n.state),{},{showMapFooter:!0,address:o||"",area:i||"",city:l||"",state:c||"",markerPosition:{lat:t,lng:a},mapPosition:{lat:t,lng:a}})),n.props.handleAddressFromMap(n.state)}),(function(e){console.error(e)}))},n.onPlaceSelected=function(e){var t=e.formatted_address,a=e.address_components,o=n.getCity(a),s=n.getArea(a),l=n.getState(a),i=e.geometry.location.lat(),c=e.geometry.location.lng();n.setState(Object(r.a)(Object(r.a)({},n.state),{},{showMapFooter:!0,address:t||"",area:s||"",city:o||"",state:l||"",markerPosition:{lat:i,lng:c},mapPosition:{lat:i,lng:c}})),n.props.handleAddressFromMap(n.state)},n.state={address:"",showMapFooter:!0,city:"",area:"",state:"",mapPosition:{lat:n.props.center.lat,lng:n.props.center.lng},markerPosition:{lat:n.props.center.lat,lng:n.props.center.lng}},n}return Object(h.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.getLiveLocation(),E.a.fromLatLng(this.state.mapPosition.lat,this.state.mapPosition.lng).then((function(t){var a=t.results[0].formatted_address,n=t.results[0].address_components,o=e.getCity(n),s=e.getArea(n),l=e.getState(n);e.setState(Object(r.a)(Object(r.a)({},e.state),{},{showMapFooter:!0,address:a||"",area:s||"",city:o||"",state:l||""})),e.props.handleAddressFromMap(e.state)}),(function(e){console.error(e)}))}},{key:"shouldComponentUpdate",value:function(e,t){return this.state.markerPosition.lat!==this.props.center.lat||this.state.address!==t.address||this.state.city!==t.city||this.state.area!==t.area||this.state.state!==t.state||this.props.center.lat!==e.center.lat&&void 0}},{key:"render",value:function(){var e=this,t=Object(b.withScriptjs)(Object(b.withGoogleMap)((function(t){return d.a.createElement(b.GoogleMap,{google:e.props.google,defaultZoom:e.props.zoom,defaultCenter:{lat:e.state.mapPosition.lat,lng:e.state.mapPosition.lng}},d.a.createElement(b.Marker,{google:e.props.google,name:"Pin",draggable:!0,onDragEnd:e.onMarkerDragEnd,position:{lat:e.state.markerPosition.lat,lng:e.state.markerPosition.lng}}),d.a.createElement(b.Marker,null),d.a.createElement("div",{className:"map-overlay d-flex"},d.a.createElement("i",{style:{fontSize:"18px",marginTop:"3vh"},className:"fa fa-search","aria-hidden":"true"}),d.a.createElement(j.a,{style:{width:"55%",height:"6vh",right:"2%",paddingLeft:"16px",background:"none",border:"0",outline:"0",color:"white",borderRadius:"5px",position:"relative",marginTop:"8px",fontSize:"16px"},onPlaceSelected:e.onPlaceSelected,types:["(regions)"],placeholder:"Search your location",componentRestrictions:{country:"in"}}),d.a.createElement("span",{onClick:e.getLiveLocation,style:{color:"white",marginTop:"2.7vh",paddingRight:"10px"}},"Live Location"),d.a.createElement("i",{className:"fa fa-map-marked-alt icon__1",style:{color:"white"},onClick:e.getLiveLocation,"aria-hidden":"true"})),d.a.createElement("div",{className:"map-overlay-footer",style:{display:e.state.showMapFooter?"block":"none"}},d.a.createElement("div",{className:"show-address"},e.state.address),d.a.createElement("span",{className:"close-address-display",onClick:e.handleCloseFooter},d.a.createElement("i",{className:"fa fa-times","aria-hidden":"true"})),d.a.createElement("span",{className:"next-address-button",onClick:e.props.handleCloseMap},"Continue",d.a.createElement("i",{className:"fa fa-angle-right ml-2","aria-hidden":"true"}))))})));return void 0!==this.props.center.lat?d.a.createElement("div",null,d.a.createElement(t,{googleMapURL:"https://maps.googleapis.com/maps/api/js?key=".concat(N.a,"&libraries=places"),loadingElement:d.a.createElement("div",{style:{height:"100%"}}),containerElement:d.a.createElement("div",{style:{height:"100vh",margin:"0",padding:"0"}}),mapElement:d.a.createElement("div",{style:{height:"100%"}})})):d.a.createElement("div",{style:{height:this.props.height}})}}]),a}(c.Component),w=a(135),S=a(255),x=a(195),C=a(11),L=a(16);t.default=Object(u.b)((function(e){return{address:e.address,config:e.config,cart:e.cart,restaurant:e.restaurant}}),(function(e){return{addNewAddress:function(t){return e(C.a(t))},setAddressList:function(t){return e(C.o(t))}}}))(Object(m.geolocated)({positionOptions:{enableHighAccuracy:!0},userDecisionTimeout:5e3})((function(e){var t=Object(c.useState)(!0),a=Object(i.a)(t,2),o=a[0],m=a[1],u=e.restaurant.curRestaurant,g=e.config.curBranch.points,h=Object(p.f)(),f=Object(c.useState)(!1),v=Object(i.a)(f,2),b=v[0],y=v[1],E=Object(c.useState)(""),O=Object(i.a)(E,2),j=O[0],C=O[1],P=Object(c.useState)(!0),A=Object(i.a)(P,2),_=A[0],F=A[1],M=Object(c.useState)({lat:u.lat,lng:u.lon}),D=Object(i.a)(M,2),T=D[0],z=D[1],R={id:"",name:e.config.authData.user.name,type:1,new:!0,phone:e.config.authData.phone,flat:"",street:"",area:"",city:"",lat:u.lat,lng:u.long},B=Object(c.useState)(R),I=Object(i.a)(B,2),K=I[0],H=I[1];Object(c.useEffect)((function(){z({lat:u.lat,lng:u.lon})}),[]);var J=function(){var t=Object(l.a)(s.a.mark((function t(){var a,n,r,o;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=N.b+"add/address",n={flat:K.flat,area:K.area,city:K.city,lat:K.lat,lon:K.lon,type:K.type},r={method:"POST",headers:{"Content-Type":"application/json;charset=utf-8",rKey:e.config.authData.rKey,dKey:e.config.authData.dKey},body:JSON.stringify(n)},t.next=5,Object(L.a)(a,r);case 5:return t.next=7,t.sent.json();case 7:if(!(o=t.sent)||1!==o.status){t.next=14;break}return C(o.msg),y(!0),e.setAddressList(o.address),h.goBack(),t.abrupt("return");case 14:if(!o){t.next=18;break}return C(o.msg),y(!0),t.abrupt("return");case 18:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),U=d.a.createElement(S.a,{onClose:function(){return y(!1)},show:b,delay:2e3,autohide:!0,style:{position:"fixed",bottom:"20vh",zIndex:"999",textAlign:"center",left:"50%",transform:"translateX(-50%)"}},d.a.createElement(S.a.Body,{style:{backgroundColor:"#2f4f4f",color:"white",borderBottom:"none",textAlign:"center",padding:"0.2rem 0.8rem"}},d.a.createElement("strong",{className:"mr-auto"},j))),W=d.a.createElement(d.a.Fragment,null,d.a.createElement(w.a,{heading:"Add Address",back:function(){return h.goBack()}}),U,d.a.createElement("div",{className:"all-product-grid container",style:{padding:"2px 15px"}},d.a.createElement("div",{className:"row",style:{marginTop:"8vh"}},d.a.createElement("div",{className:"col-lg-12 container checout-address-step"},d.a.createElement("form",{className:"",onSubmit:function(e){_?(e.preventDefault(),J()):(e.preventDefault(),C("We can't deliver to your location."),y(!0))}},d.a.createElement("div",{className:"address-fieldset"},d.a.createElement("div",{className:"row"},d.a.createElement("div",{className:"col-lg-6 col-md-12"},d.a.createElement("div",{className:"form-group"},d.a.createElement("div",{className:"product-radio"},d.a.createElement("ul",{className:"product-now"},d.a.createElement("li",null,d.a.createElement("input",{type:"radio",name:"address1",id:"ad1",checked:1===K.type,onChange:function(){return H(Object(r.a)(Object(r.a)({},K),{},{type:1}))}}),d.a.createElement("label",{htmlFor:"ad1"},"Home")),d.a.createElement("li",null,d.a.createElement("input",{type:"radio",name:"address2",id:"ad2",checked:2===K.type,onChange:function(){return H(Object(r.a)(Object(r.a)({},K),{},{type:2}))}}),d.a.createElement("label",{htmlFor:"ad2"},"Office")),d.a.createElement("li",null,d.a.createElement("input",{type:"radio",name:"address3",id:"ad3",checked:3===K.type,onChange:function(){return H(Object(r.a)(Object(r.a)({},K),{},{type:3}))}}),d.a.createElement("label",{htmlFor:"ad3"},"Other")))))),K.area&&d.a.createElement("div",{className:"address-item"},d.a.createElement("div",{className:"address-dt-all"},d.a.createElement("p",{style:{display:"flex",fontSize:"14px",fontWeight:"bold",justifyContent:"space-between"}},"Selected Address",d.a.createElement("div",{className:"d-flex",onClick:function(){return m(!0)}},"Edit",d.a.createElement("i",{className:"uil uil-edit"}))),d.a.createElement("p",null,K.area))),d.a.createElement("div",{className:"col-lg-6 col-md-12",style:{marginBottom:"20px"}},d.a.createElement("div",{className:"form-group"},d.a.createElement("label",{className:"control-label"},"Flat / House / Office No.*"),d.a.createElement("input",{id:"flat",name:"flat",type:"text",placeholder:"Flat No.",value:K.flat,onChange:function(e){var t=e.target,a=t.name,o=t.value;H(Object(r.a)(Object(r.a)({},K),{},Object(n.a)({},a,o)))},className:"form-control input-md",required:!0}))),d.a.createElement("div",{className:"col-lg-12 col-md-12"},d.a.createElement("div",{className:"form-group"},d.a.createElement("div",{className:"address-btns"},d.a.createElement("div",{className:""},d.a.createElement("button",{type:"submit",className:"save-btn14 hover-btn"},"Add Address")),d.a.createElement("div",{className:"col"},d.a.createElement("button",{onClick:function(){h.push("/checkout")},className:"next-btn16 hover-btn float-right"},"Back")))))))))))),G=d.a.createElement("div",{style:{width:"100%",overflow:"hidden",position:"absolute"}},U,d.a.createElement(k,{google:e.google,center:T,height:"100%",zoom:15,handleAddressFromMap:function(e){H(Object(r.a)(Object(r.a)({},K),{},{area:e.address,city:e.area,lat:e.mapPosition.lat,lon:e.mapPosition.lng})),function(e,t){var a=[];g.map((function(e){return a.push({latitude:e[1],longitude:e[0]})}));var n=x.isPointInPolygon({latitude:e,longitude:t},a);F(n)}(e.mapPosition.lat,e.mapPosition.lng)},handleCloseMap:function(){_?m(!1):(C("We can't deliver to your location."),y(!0))},isServicable:_,setError:C,setShowToast:y}));return o?G:W})))}}]);
//# sourceMappingURL=18.6ef73f53.chunk.js.map