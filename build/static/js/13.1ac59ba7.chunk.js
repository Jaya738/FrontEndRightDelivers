(this["webpackJsonpright-deliveres"]=this["webpackJsonpright-deliveres"]||[]).push([[13],{135:function(e,t,a){"use strict";var r=a(0),n=a.n(r),c=a(28),l=a(4),s=a(21);t.a=Object(s.b)((function(e){return{config:e.config,cartCount:e.cart.cartItems.length}}))(Object(l.g)((function(e){var t=e.cartCount;return n.a.createElement("div",{className:"fixed-top align-middle",style:{position:"fixed",padding:"0.5rem 1rem",top:"0",width:"100%",backgroundColor:"#2F4F4F",zIndex:"10"}},n.a.createElement("div",{style:{paddingTop:"4vh",display:"flex",alignItems:"center"}},n.a.createElement("div",{onClick:e.back,style:{fontSize:"20px",color:"white",padding:"0px 20px"}},n.a.createElement("i",{className:"fa fa-angle-left","aria-hidden":"true"})),n.a.createElement("span",{style:{fontSize:"18px",color:"white"}},e.heading),n.a.createElement(c.b,{to:"/dashboard/cart",className:"option_links ml-auto mr-3"},n.a.createElement("i",{className:"uil uil-shopping-cart-alt icon_wishlist"}),n.a.createElement("span",{className:"noti_count1"},t))))})))},154:function(e,t,a){"use strict";var r=a(0),n=a.n(r),c=a(155),l=a.n(c);a(156);t.a=function(){return n.a.createElement("div",{className:"bodyMain"},n.a.createElement("img",{src:l.a,style:{width:"30%",display:"block",marginLeft:"auto",marginRight:"auto",position:"absolute",top:"45%",left:"42%"},alt:"Loading..."}))}},155:function(e,t,a){e.exports=a.p+"static/media/spinner.bab4b43c.svg"},156:function(e,t,a){},183:function(e,t,a){e.exports=a.p+"static/media/img-14.b0030b9d.jpg"},184:function(e,t,a){},185:function(e,t,a){e.exports=a.p+"static/media/addressEmpty.121e5a15.svg"},192:function(e,t,a){"use strict";var r=a(3),n=a(5),c=a(132),l=a.n(c),s=a(0),i=a.n(s),o=a(134),u=i.a.forwardRef((function(e,t){var a=e.bsPrefix,c=e.className,s=e.fluid,u=e.rounded,d=e.roundedCircle,m=e.thumbnail,f=Object(n.a)(e,["bsPrefix","className","fluid","rounded","roundedCircle","thumbnail"]);a=Object(o.b)(a,"img");var p=l()(s&&a+"-fluid",u&&"rounded",d&&"rounded-circle",m&&a+"-thumbnail");return i.a.createElement("img",Object(r.a)({ref:t},f,{className:l()(c,p)}))}));u.displayName="Image",u.defaultProps={fluid:!1,rounded:!1,roundedCircle:!1,thumbnail:!1},t.a=u},578:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return T}));var r=a(0),n=a.n(r),c=a(4),l=a(29),s=a.n(l),i=a(42),o=a(41),u=a(255),d=a(21),m=a(28),f=a(135),p=a(12),b=a(1),h=a(11),g=a(183),E=a.n(g),v=a(14);var y=Object(d.b)(null,(function(e){return{deleteCartItem:function(t){return e(h.j(t))}}}))((function(e){var t=e.product;return n.a.createElement("div",null,n.a.createElement("div",{className:"cart-item border_radius"},n.a.createElement("div",{className:"cart-product-img"},n.a.createElement("img",{src:e.product.img?v.c+"restaurants/items/"+e.product.img:E.a,alt:""})),n.a.createElement("div",{className:"cart-text"},n.a.createElement("div",{className:""},n.a.createElement("h4",null,t.name," ",t.quantity>1&&"x "+t.quantity),1===t.custmz&&n.a.createElement("span",{style:{fontSize:"10px",margin:"-2px 5px"}},"( ",t.options," )")),n.a.createElement("div",{className:"d-flex"},1===e.product.custmz&&e.product.extras.map((function(e,t){return n.a.createElement("label",{key:t,style:{padding:"2px 4px",backgroundColor:"#2f4f4f",color:"white",borderRadius:"3px",fontWeight:"600",fontSize:"10px",marginRight:"3px",marginTop:"5px"}},e.n)}))),n.a.createElement("div",{className:"cart-item-price"},"\u20b9",t.itemPrice,1===e.product.custmz&&e.product.extras.length>0&&n.a.createElement("div",{style:{marginLeft:"10px",fontSize:"12px",color:"grey"}}," ","+ \u20b9",e.product.extraPrice)),n.a.createElement("button",{type:"button",onClick:function(){e.deleteCartItem(e.product.pid)},className:"cart-close-btn"},n.a.createElement("i",{className:"uil uil-multiply"})))))})),x=a(154),N=a(16);var O=Object(d.b)((function(e){return{config:e.config,address:e.address,cart:e.cart,restaurant:e.restaurant}}),(function(e){return{setCheckoutData:function(t){return e(h.q(t))}}}))((function(e){var t=Object(r.useState)(!0),a=Object(o.a)(t,2),c=a[0],l=a[1],u={totalPrice:0,subTotal:0,deliveryCharge:0,savings:0},d=Object(r.useState)(e.cart.checkoutData),m=Object(o.a)(d,2),f=m[0],h=m[1];Object(r.useEffect)((function(){E(),O()}),[]);var g=v.b+"restaurants/charges",E=function(){var t=Object(i.a)(s.a.mark((function t(){var a,r,n;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a={lat:e.address.curAddress?e.address.curAddress.lat:"",lon:e.address.curAddress?e.address.curAddress.lon:"",rid:e.cart.cartItems.length>0?e.cart.cartItems[0].rid:""},r={method:"POST",headers:{"Content-Type":"application/json;charset=utf-8",rKey:e.config.authData.rKey,dKey:e.config.authData.dKey},body:JSON.stringify(a)},t.next=4,Object(N.a)(g,r);case 4:return t.next=6,t.sent.json();case 6:if(!(n=t.sent)||0!==n.status){t.next=10;break}return l(!1),t.abrupt("return");case 10:if(!n||1!==n.status){t.next=15;break}return h(Object(b.a)(Object(b.a)({},f),{},{deliveryCharge:parseFloat(n.charges)})),e.setCheckoutData(Object(b.a)(Object(b.a)({},e.cart.checkoutData),{},{deliveryCharge:parseFloat(n.charges),token:n.token,distance:n.kms})),l(!1),t.abrupt("return");case 15:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),O=function(){var t=0,a=0;return e.cart.cartItems.map((function(e){return t+=(parseInt(e.itemPrice)+parseInt(e.extraPrice))*e.quantity,a+=e.sprice*e.quantity,t})),h(Object(b.a)(Object(b.a)({},f),{},{subTotal:t,savings:a-t,totalPrice:parseFloat(f.deliveryCharge)+t})),function(){h(u)}};return Object(r.useEffect)((function(){O()}),[e.cart.cartItems].concat(Object(p.a)(e.cart.cartItems.map((function(e){return e.quantity}))),[e.cart.checkoutData])),n.a.createElement(n.a.Fragment,null,c?n.a.createElement(x.a,null):n.a.createElement("div",null,n.a.createElement("div",{className:"pdpt-bg mt-0"},n.a.createElement("div",{className:"pdpt-title"},n.a.createElement("h4",null,"Order Summary")),n.a.createElement("div",{className:"right-cart-dt-body"},e.cart.cartItems.map((function(e){return n.a.createElement(y,{product:e,key:e.pid})}))),n.a.createElement("div",{className:"total-checkout-group"},n.a.createElement("div",{className:"cart-total-dil"},n.a.createElement("h4",null,"Cart Total"),n.a.createElement("span",null,"\u20b9",f.subTotal)),n.a.createElement("div",{className:"cart-total-dil pt-3"},n.a.createElement("h4",null,"Fees"),n.a.createElement("span",null,"\u20b9",f.deliveryCharge))),n.a.createElement("div",{className:"main-total-cart mb-5"},n.a.createElement("h2",null,"Total"),n.a.createElement("span",null,"\u20b9",f.totalPrice)))))}));var j=Object(d.b)((function(e){return{config:e.config,address:e.address,cart:e.cart,restaurant:e.restaurant}}),(function(e){return{setBackUrl:function(t){return e(h.p(t))},clearCart:function(){return e(h.g())},addNewOrder:function(t){return e(h.b(t))},setCheckoutData:function(t){return e(h.q(t))}}}))(Object(c.g)((function(e){var t=Object(r.useState)(""),a=Object(o.a)(t,2),l=a[0],d=a[1],p=Object(r.useState)(""),b=Object(o.a)(p,2),h=b[0],g=b[1],E=Object(c.f)(),y=e.location.pathname,x=e.config.isAuth,j=Object(r.useState)(!1),k=Object(o.a)(j,2),C=k[0],S=k[1],w=Object(r.useState)(!1),P=Object(o.a)(w,2),A=P[0],D=P[1],I=Object(r.useState)(!0),T=Object(o.a)(I,2),B=T[0],K=T[1],z=Object(r.useState)(!1),q=Object(o.a)(z,2),F=q[0],_=q[1],L=Object(r.useState)(""),R=Object(o.a)(L,2),J=R[0],U=R[1],W=v.b+"restaurants/placeorder",M=function(){var t=Object(i.a)(s.a.mark((function t(a){var r,n,c;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r={account:e.config.authData.phone,bid:e.config.curBranch?e.config.curBranch.bid:"",rid:e.cart.cartItems.length>0?e.cart.cartItems[0].rid:"",total:e.cart.checkoutData.subTotal,fees:e.cart.checkoutData.deliveryCharge,token:e.cart.checkoutData.token,type:e.config.curService.type,method:1,address_id:"",name:e.config.authData.user.name,mobile:e.config.authData.user.mbl,items:a.cart,address:a.address,note:h},n={method:"POST",headers:{"Content-Type":"application/json;charset=utf-8",rkey:a.rKey,dkey:a.dKey},body:JSON.stringify(r)},t.next=4,Object(N.a)(W,n);case 4:return t.next=6,t.sent.json();case 6:if(!(c=t.sent)||1!==c.status){t.next=14;break}return U(c.msg),S(!0),_(!0),e.addNewOrder(c.order),setTimeout((function(){S(!1),e.clearCart(),_(!1),K(!0),E.push("/")}),1e3),t.abrupt("return");case 14:if(!c){t.next=20;break}return U(c.msg),S(!0),K(!0),setTimeout((function(){return S(!1)}),1e3),t.abrupt("return");case 20:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),X=function(){},H=n.a.createElement(u.a,{onClose:function(){return S(!1)},show:C,delay:2e3,autohide:!0,style:{position:"fixed",bottom:"20vh",zIndex:"999",textAlign:"center",left:"50%",transform:"translateX(-50%)"}},n.a.createElement(u.a.Body,{style:{backgroundColor:"#2f4f4f",color:"white",borderBottom:"none",textAlign:"center",padding:"0.2rem 0.8rem"}},n.a.createElement("strong",{className:"mr-auto"},J)));return n.a.createElement("div",{className:""},n.a.createElement(f.a,{heading:"Checkout",back:function(){return E.goBack()}}),n.a.createElement("div",{className:"all-product-grid mar-15 container mb-5"},H,n.a.createElement("div",{className:"pdpt-bg p-4 mb-4"},n.a.createElement("div",{className:"pdpt-title"},n.a.createElement("h4",null,"Select Payment Option")),n.a.createElement("div",{className:"rpt100 mt-3"},n.a.createElement("ul",{className:"radio--group-inline-container_1"},n.a.createElement("li",null,n.a.createElement("div",{className:"radio-item_1"},n.a.createElement("input",{id:"cashondelivery1",value:"cashondelivery",name:"paymentmethod",type:"radio",onChange:X,checked:!0,"data-minimum":"50.0"}),n.a.createElement("label",{htmlFor:"cashondelivery1",className:"radio-label_1"},"Cash on Delivery"))),n.a.createElement("li",null,n.a.createElement("div",{className:"radio-item_1"},n.a.createElement("input",{id:"card1",value:"card",name:"paymentmethod",type:"radio",disabled:!0,onChange:X,"data-minimum":"50.0"}),n.a.createElement("label",{htmlFor:"card1",className:"radio-label_1"},"Credit / Debit Card")))))),n.a.createElement("div",{className:"d-flex",style:{justifyContent:"space-evenly",paddingBottom:"10px"}},n.a.createElement("div",{className:"d-flex"},n.a.createElement("input",{id:"note",name:"note",type:"text",placeholder:"Leave a note",value:l,onChange:function(e){return d(e.target.value)},autoComplete:"off",className:"form-control"})),n.a.createElement("div",{className:"d-flex"},n.a.createElement("button",{onClick:function(){D(!0),g(l),d("")},style:{backgroundColor:"#d30013",padding:"10px 25px"},className:"w-100 otp-btn"},"Add"))),A&&h.length>0&&n.a.createElement("div",{style:{margin:"15px",backgroundColor:"#2f4f4f",color:"white",padding:"5px 10px",borderRadius:"5px"},className:"note"},"Note: ",h),n.a.createElement("div",{className:"col-lg-4 col-md-5"},n.a.createElement(O,null)),n.a.createElement("div",{className:"container d-block d-sm-none"},n.a.createElement("div",{className:"justify-content-center w-100",style:{position:"fixed",bottom:"0px",left:"0px"}},n.a.createElement(m.b,{to:x?{pathname:"".concat(e.match.url)}:{pathname:"/login",state:{backUrl:y}},className:"next-btn16 hover-btn w-100 text-center",style:{backgroundColor:F&&"#5cb85c"},onClick:function(){if(B){K(!1),e.setBackUrl(y);var t=[];e.cart.cartItems.forEach((function(e){t.push({pid:e.pid,quantity:e.quantity,itemPrice:e.itemPrice,extras:e.extras||[],option:e.options||""})}));var a={cart:t,address:e.address.curAddress,rKey:e.config.authData.rKey,dKey:e.config.authData.dKey};!t.length>0?(U("Your Cart is empty!"),S(!0)):0===Object.keys(e.address.curAddress).length?(U("Select a delivery address!"),S(!0),setTimeout((function(){return S(!1)}),2e3)):M(a)}else U("Processing your order. Please wait..."),S(!0)}},B?"Place Order":F?"Order Placed":"Processing...")))))})));function k(e){return n.a.createElement("div",null,n.a.createElement("h1",null,"My Bill"))}var C=a(195),S=a(192),w=(a(184),a(200)),P=a(185),A=a.n(P);var D=Object(d.b)((function(e){return{address:e.address,config:e.config,cart:e.cart}}),(function(e){return{setCurAddress:function(t){return e(h.r(t))},setAddressList:function(t){return e(h.o(t))}}}))(Object(w.geolocated)({positionOptions:{enableHighAccuracy:!0},userDecisionTimeout:5e3})((function(e){var t=e.address.addressList||[],a=Object(c.f)(),l=Object(r.useState)(!1),d=Object(o.a)(l,2),m=d[0],f=d[1],p=Object(r.useState)(""),b=Object(o.a)(p,2),h=b[0],g=b[1],E=e.config.curBranch,y=Object(r.useState)(!0),x=Object(o.a)(y,2),O=x[0],j=x[1],k=Object(r.useState)(!1),w=Object(o.a)(k,2),P=w[0],D=w[1],I=Object(r.useState)({}),T=Object(o.a)(I,2),B=T[0],K=T[1],z=function(e,t){var a=[];E.points.map((function(e){return a.push({latitude:e[1],longitude:e[0]})}));var r=C.isPointInPolygon({latitude:e,longitude:t},a);j(r)};Object(r.useEffect)((function(){B&&e.setCurAddress(B)}),[P,B]);var q=function(){var t=Object(i.a)(s.a.mark((function t(a){var r,n,c,l;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=v.b+"delete/address",n={address_id:a.id},c={method:"POST",headers:{"Content-Type":"application/json;charset=utf-8",rKey:e.config.authData.rKey,dKey:e.config.authData.dKey},body:JSON.stringify(n)},t.next=5,Object(N.a)(r,c,3e3);case 5:return t.next=7,t.sent.json();case 7:if(!(l=t.sent)||1!==l.status){t.next=13;break}return g(l.msg),f(!0),e.setAddressList(l.address),t.abrupt("return");case 13:if(!l){t.next=17;break}return g(l.msg),f(!0),t.abrupt("return");case 17:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),F=n.a.createElement("div",{className:"row",style:{marginTop:"6vh"}},n.a.createElement("div",{className:"col-lg-12 col-md-12"},n.a.createElement("div",{className:"pdpt-bg"},n.a.createElement("div",{className:"pdpt-title"},n.a.createElement("h4",null,"Select Delivery Address")),n.a.createElement("div",{className:"address-body"},n.a.createElement("button",{className:"next-btn16 hover-btn",onClick:function(){a.push("/addaddress")}},"Add New Address"),n.a.createElement("div",{className:"address-spacing"},t.length>0?t.map((function(e){return n.a.createElement("div",{key:e.id,onClick:function(){return K(e)},className:"address-item"},n.a.createElement("i",{style:{backgroundColor:"#2f4f4f",border:"2px solid #2f4f4f",borderRadius:"5px",marginRight:"10px",fontSize:"20px",color:"white"},className:B.id===e.id?"fa fa-check-square":"fa fa-square"}),n.a.createElement("div",{className:"address-dt-all"},n.a.createElement("h4",null,e.name," ",n.a.createElement("i",{style:{color:"#d30013"},className:1===e.type?"fa fa-home":2===e.type?"fa fa-briefcase":"fa fa-map"}))," ",n.a.createElement("p",null,e.flat,", ",e.area),n.a.createElement("ul",{className:"action-btns"},n.a.createElement("li",null,n.a.createElement("div",{className:"action-btn",onClick:function(){return function(e){D(!0),q(e)}(e)}},n.a.createElement("i",{className:"uil uil-edit"}))),n.a.createElement("li",null,n.a.createElement("div",{className:"action-btn",onClick:function(){return q(e)}},n.a.createElement("i",{className:"uil uil-trash-alt"}))))))})):n.a.createElement("div",null,n.a.createElement(S.a,{src:A.a,fluid:!0}),n.a.createElement("p",{style:{color:"#d30013",fontSize:"18px",fontWeight:"bold",textAlign:"center"}},"Start adding your address"))),n.a.createElement("div",{className:"col-lg-12 col-md-12"},n.a.createElement("div",{className:"form-group"},n.a.createElement("div",{className:"address-btns"},n.a.createElement("div",{className:""},n.a.createElement("button",{onClick:function(){return a.push("/dashboard/cart")},className:"save-btn14 hover-btn"},"Back")),n.a.createElement("div",{className:"col"},n.a.createElement("button",{onClick:function(){B.lat?(z(B.lat,B.lon),O?e.cart.checkoutData.totalPrice>0?a.push("/checkout/summary"):(g("Cart is empty !"),f(!0)):(g("We can't deliver to your location."),f(!0))):(g("Select an Address"),f(!0))},className:"next-btn16 hover-btn float-right"},"Next"))))))))),_=n.a.createElement(u.a,{onClose:function(){return f(!1)},show:m,delay:2e3,autohide:!0,style:{position:"fixed",bottom:"20vh",zIndex:"999",textAlign:"center",left:"50%",transform:"translateX(-50%)"}},n.a.createElement(u.a.Body,{style:{backgroundColor:"#2f4f4f",color:"white",borderBottom:"none",textAlign:"center",padding:"0.2rem 0.8rem"}},n.a.createElement("strong",{className:"mr-auto"},h)));return n.a.createElement(n.a.Fragment,null,_,n.a.createElement("div",null,F))})));function I(e){var t=Object(c.f)();return n.a.createElement("div",null,n.a.createElement("div",{className:""},n.a.createElement(f.a,{heading:"Address",back:function(){return t.goBack()}}),n.a.createElement("div",{className:"all-product-grid container p-3"}," ",n.a.createElement(D,null))))}function T(e){return n.a.createElement("div",null,n.a.createElement(c.c,null,n.a.createElement(c.a,{exact:!0,path:"".concat(e.match.url,"/"),component:I}),n.a.createElement(c.a,{path:"".concat(e.match.url,"/summary"),component:j}),n.a.createElement(c.a,{path:"".concat(e.match.url,"/bill"),component:k})))}}}]);
//# sourceMappingURL=13.1ac59ba7.chunk.js.map